@page "/Trabajo/Create"
@rendermode InteractiveServer
@inject TrabajoService trabajoService
@inject NavigationManager navigation
@inject TecnicoService tecnicoService
@inject ClienteService clienteService

<h3>Crear Trabajo</h3>

<div class="container">
    <div class="card">
        <div class="card-body">
            <div class="form-group">
                <label for="Fecha">Fecha</label>
                <input type="date" class="form-control" id="Fecha" @bind="trabajo.Fecha" />
            </div>
            <div class="form-group">
                <label for="ClienteId">Cliente ID</label>
                <input type="text" class="form-control" id="ClienteId" @bind="trabajo.ClienteId" />
            </div>
            <div class="form-group">
                <label for="nombre">Nombre</label>
                <input type="text" class="form-control" id="nombre" @bind="trabajo.nombre" />
            </div>
            <div class="form-group">
                <label for="TecnicoId">Técnico ID</label>
                <input type="text" class="form-control" id="TecnicoId" @bind="trabajo.TecnicoId" />
            </div>
            <div class="form-group">
                <label for="TecNombre">Nombre del Técnico</label>
                <input type="text" class="form-control" id="TecNombre" @bind="trabajo.TecNombre" />
            </div>
            <div class="form-group">
                <label for="Descripcion">Descripción</label>
                <textarea class="form-control" id="Descripcion" @bind="trabajo.Descripcion"></textarea>
            </div>
            <div class="form-group">
                <label for="Monto">Monto</label>
                <input type="number" class="form-control" id="Monto" @bind="trabajo.Monto" />
            </div>
            <button class="btn btn-primary" @onclick="Guardar">Guardar</button>
            <button class="btn btn-secondary" @onclick="OnCancel">Cancelar</button>
        </div>
    </div>
</div>

@code {
    public Trabajo trabajo = new Trabajo();

    private async Task Guardar()
    {
        await trabajoService.Insertar(trabajo); // Usar Insertar en lugar de Crear
        navigation.NavigateTo("/Trabajo/Index");
    }

    private void OnCancel()
    {
        navigation.NavigateTo("/Trabajo/Index");
    }

}
